<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>

<script id="tailwind-config">
  tailwind.config = {
    darkMode: "class",
    theme: {
      extend: {
        colors: {
          "primary": "#f2200d",
          "background-light": "#fafaf9",
          "background-dark": "#1a1a1a",
        },
        fontFamily: {
          "display": ["Plus Jakarta Sans"]
        },
        borderRadius: {"DEFAULT": "0.5rem", "lg": "1rem", "xl": "1.5rem", "full": "9999px"},
      },
    },
  }
</script>
<style>
  .material-symbols-outlined {
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
  }
  body {
    font-family: 'Plus Jakarta Sans', sans-serif;
  }
</style>
<body>

<!-- ✅ GỌI HEADER -->
<div th:replace="layout/header :: header"></div>

<div class="relative flex min-h-screen w-full flex-col overflow-x-hidden">

  <main class="flex-1 max-w-[1200px] mx-auto w-full px-4 lg:px-10 py-8">
<!--    &lt;!&ndash; Breadcrumbs &ndash;&gt;-->
<!--    <div class="flex items-center gap-2 mb-6">-->
<!--      <a class="text-[#9c5049] dark:text-white/60 text-sm font-medium hover:underline" th:href="@{/}">Trang chủ</a>-->
<!--      <span class="text-[#9c5049] dark:text-white/40 text-sm">/</span>-->
<!--      <span class="text-[#1c0e0d] dark:text-white text-sm font-bold">Giỏ hàng</span>-->
<!--    </div>-->

    <!-- Page Heading -->
    <div class="flex flex-col sm:flex-row justify-between items-end gap-4 mb-10">
      <div>
        <h1 class="text-[#1c0e0d] dark:text-white text-4xl lg:text-5xl font-black leading-tight tracking-[-0.033em]">
          Giỏ hàng của bạn
        </h1>
        <p class="text-[#9c5049] dark:text-white/60 text-lg font-medium mt-1">
          Bạn đang có
          <span th:text="${#lists.size(cart)}"></span>
          món ăn trong khay
        </p>
      </div>
      <a th:href="@{/}"
         class="flex items-center gap-2 px-6 py-3 bg-[#f4e8e7] dark:bg-[#333] text-[#1c0e0d] dark:text-white rounded-xl font-bold text-sm hover:bg-[#e8d1ce] transition-colors">
        <span class="material-symbols-outlined text-[18px]">arrow_back</span>
        Tiếp tục mua sắm
      </a>
    </div>

    <!-- Cart Layout -->
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-10">

      <!-- Items List -->
      <div class="lg:col-span-8 flex flex-col gap-6">

        <div th:each="entry : ${cart}"
             class="group flex flex-col sm:flex-row items-center gap-6 p-6 bg-white dark:bg-[#252525] rounded-xl border border-[#e8d1ce] dark:border-[#333] hover:shadow-xl hover:shadow-primary/5 transition-all">

          <div class="w-24 h-24 bg-gray-100 dark:bg-[#333] rounded-lg overflow-hidden flex-shrink-0">
            <div class="w-full h-full bg-cover bg-center"
                 th:style="'background-image:url(' + ${entry.value.item.image} + ')'">
            </div>
          </div>

          <div class="flex-1 flex flex-col gap-1">
            <h3 class="text-xl font-bold dark:text-white"
                th:text="${entry.value.item.itemName}">
            </h3>

            <p class="text-sm text-[#9c5049] dark:text-white/60">
              Số lượng:
              <span th:text="${entry.value.quantity}"></span>
            </p>

            <div class="mt-4 flex items-center gap-6">
              <a th:href="@{/cart/remove/{id}(id=${entry.key})}"
                 class="text-xs font-bold text-[#9c5049] dark:text-white/40 flex items-center gap-1 hover:text-primary transition-colors uppercase tracking-wider">
                <span class="material-symbols-outlined text-[16px]">delete</span>
                Xóa
              </a>
            </div>
          </div>

          <div class="text-right sm:min-w-[120px]">
            <p class="text-xl font-extrabold text-[#1c0e0d] dark:text-white"
               th:text="${#numbers.formatDecimal(entry.value.totalPrice,0,'COMMA',0,'POINT')} + 'đ'">
            </p>
          </div>
        </div>

      </div>

      <!-- Order Summary Sidebar -->
      <div class="lg:col-span-4">
        <div class="sticky top-24 bg-white dark:bg-[#252525] rounded-xl border border-[#e8d1ce] dark:border-[#333] overflow-hidden shadow-2xl shadow-primary/5">
          <div class="p-6">
            <h2 class="text-[#1c0e0d] dark:text-white text-xl font-bold mb-6">Tóm tắt đơn hàng</h2>

            <div class="flex flex-col gap-4 mb-6">
              <div class="flex justify-between items-center">
                <span class="text-[#9c5049] dark:text-white/60 font-medium">Tạm tính</span>
                <span class="text-[#1c0e0d] dark:text-white font-bold"
                      th:text="${#numbers.formatDecimal(total,0,'COMMA',0,'POINT')} + 'đ'">
                </span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-[#9c5049] dark:text-white/60 font-medium">Phí giao hàng</span>
                <span class="text-[#1c0e0d] dark:text-white font-bold">15.000đ</span>
              </div>
            </div>

            <div class="border-t border-dashed border-[#e8d1ce] dark:border-[#444] pt-6 mb-8">
              <div class="flex justify-between items-end">
                <span class="text-lg font-bold dark:text-white">Tổng cộng</span>
                <div class="text-right">
                  <span class="text-3xl font-black text-primary"
                        th:text="${#numbers.formatDecimal(total + 15000,0,'COMMA',0,'POINT')} + 'đ'">
                  </span>
                  <p class="text-[10px] text-[#9c5049] dark:text-white/40 uppercase font-bold tracking-widest mt-1">
                    (Đã bao gồm VAT)
                  </p>
                </div>
              </div>
            </div>

            <a th:href="@{/checkout}"
               class="w-full bg-primary text-white py-4 rounded-xl font-black text-lg shadow-lg shadow-primary/20 hover:bg-primary/90 transition-all flex items-center justify-center gap-3">
              THANH TOÁN
              <span class="material-symbols-outlined">arrow_forward</span>
            </a>
          </div>

          <div class="bg-[#f4e8e7] dark:bg-white/5 p-4 flex gap-3">
            <span class="material-symbols-outlined text-primary text-[20px]">local_shipping</span>
            <p class="text-xs leading-relaxed text-[#9c5049] dark:text-white/60">
              Miễn phí vận chuyển cho đơn hàng từ <span class="font-bold">500.000đ</span>.
              Thời gian giao hàng dự kiến: 20-30 phút.
            </p>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>

<!-- ✅ GỌI FOOTER -->
<div th:replace="layout/footer :: footer"></div>


</body>
</html>